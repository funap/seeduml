<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeedUML - Instant Sequence Diagrams</title>
    <meta name="description"
        content="Generate beautiful sequence diagrams instantly in your browser. No server-side rendering, fully client-side SVG generation.">
    <script src="dist/seeduml.min.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', Consolas, 'Courier New', monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        section {
            padding: 80px 0;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo span {
            color: var(--text-main);
        }

        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            margin-left: 24px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        /* Hero */
        .hero {
            text-align: center;
            padding: 100px 0 60px;
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--text-main) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        .hero p {
            font-size: 20px;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto 40px;
        }

        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 14px 32px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2);
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
        }

        .btn.secondary {
            background: white;
            color: var(--text-main);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .btn.secondary:hover {
            background: #f1f5f9;
        }

        /* Features */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .feature-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .feature-icon {
            font-size: 32px;
            margin-bottom: 20px;
            display: inline-block;
            padding: 12px;
            background: #eff6ff;
            border-radius: 12px;
            color: var(--primary);
        }

        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }

        .feature-card p {
            color: var(--text-muted);
            font-size: 15px;
        }

        /* Playground */
        .playground-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: 600px;
            margin-top: 40px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .editor-pane {
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border);
        }

        .pane-header {
            padding: 12px 20px;
            background: #f8fafc;
            border-bottom: 1px solid var(--border);
            font-weight: 600;
            font-size: 14px;
            color: var(--text-muted);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        textarea {
            flex: 1;
            width: 100%;
            border: none;
            padding: 20px;
            font-family: var(--font-mono);
            font-size: 14px;
            resize: none;
            outline: none;
            background: #fff;
            color: #334155;
            line-height: 1.5;
        }

        .preview-pane {
            display: flex;
            flex-direction: column;
            background: #ffffff;
            overflow: hidden;
        }

        #output {
            flex: 1;
            overflow: auto;
            padding: 20px;
            display: flex;
        }

        #output svg {
            margin: auto;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        #output.zoom-fit svg {
            max-width: 100%;
            max-height: 100%;
        }

        #output.zoom-actual svg {
            max-width: none;
            max-height: none;
        }

        /* Gallery */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .gallery-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
        }

        .gallery-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .gallery-preview {
            height: 200px;
            background: #fff;
            overflow: hidden;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .gallery-preview svg {
            max-width: 100%;
            max-height: 100%;
            width: auto !important;
            height: auto !important;
        }

        .gallery-info {
            padding: 15px;
            background: #f8fafc;
        }

        .gallery-title {
            font-weight: 600;
            font-size: 14px;
            color: var(--text-main);
        }

        footer {
            margin-top: 100px;
            border-top: 1px solid var(--border);
            padding: 40px 0;
            text-align: center;
            color: var(--text-muted);
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 36px;
            }

            .playground-container {
                grid-template-columns: 1fr;
                height: auto;
            }

            textarea {
                height: 300px;
            }

            .preview-pane {
                height: 300px;
                border-top: 1px solid var(--border);
            }
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: white;
            width: 90vw;
            height: 90vh;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
        }

        .modal-title {
            font-weight: 600;
            font-size: 18px;
        }

        .modal-body {
            flex: 1;
            overflow: auto;
            padding: 40px;
            display: flex;
            background: #f8fafc;
        }

        .modal-body svg {
            background: white;
            box-shadow: var(--shadow-md);
            /* Ensure actual size */
            max-width: none;
            max-height: none;
            /* Center when smaller than view, allow scroll when larger */
            margin: auto;
            /* Prevent shrinking */
            flex-shrink: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-muted);
            line-height: 1;
            padding: 4px;
            border-radius: 4px;
        }

        .close-btn:hover {
            color: var(--text-main);
            background: #f1f5f9;
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo">
                    üå± <span>SeedUML</span>
                </a>
                <div class="nav-links">
                    <a href="#features">Features</a>
                    <a href="#playground">Playground</a>
                    <a href="#gallery">Examples</a>
                    <a href="#documentation">Getting Started</a>
                    <a href="https://github.com/funap/seeduml" target="_blank">GitHub</a>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <section class="hero">
                <h1>Sequence Diagrams,<br>Instantly in Your Browser</h1>
                <p>Create beautiful, precise sequence diagrams using a simple text syntax. No servers, no latency, just
                    pure client-side rendering.</p>
                <div style="display: flex; gap: 16px; justify-content: center;">
                    <a href="#playground" class="btn">Try it Live</a>
                    <a href="#gallery" class="btn secondary">View Examples</a>
                </div>
            </section>

            <section id="features">
                <div class="features">
                    <div class="feature-card">
                        <span class="feature-icon">‚ö°</span>
                        <h3>Blazing Fast</h3>
                        <p>Renders instantly in your browser. No server round-trips means zero latency as you type.</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">‚ú®</span>
                        <h3>Modern Aesthetics</h3>
                        <p>Generates crisp, publication-quality SVGs with precise alignment and beautiful styling.</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üõ†</span>
                        <h3>Compatible Syntax</h3>
                        <p>Uses a familiar syntax similar to PlantUML, making it easy to learn and migrate.</p>
                    </div>
                </div>
            </section>

            <section id="playground">
                <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 20px;">
                    <h2>Interactive Playground</h2>
                    <span style="font-size: 14px; color: var(--text-muted);">Edits render automatically</span>
                </div>
                <div class="playground-container">
                    <div class="editor-pane">
                        <div class="pane-header">
                            <span>Input Source</span>
                        </div>
                        <textarea id="editor" spellcheck="false">Alice -> Bob: Authentication Request
Bob --> Alice: Authentication Response

Alice -> Bob: Another Request
note right: Seamless text handling

alt successful case
    Bob -> Alice: Success
else failure
    Bob -> Alice: Failure
end</textarea>
                    </div>
                    <div class="preview-pane">
                        <div class="pane-header">
                            <span>Live Preview</span>
                            <div style="display: flex; gap: 12px;">
                                <button id="copy-btn"
                                    style="background:none; border:none; color:var(--primary); cursor:pointer; font-size:12px;">Copy
                                    SVG</button>
                                <button id="zoom-btn"
                                    style="background:none; border:none; color:var(--primary); cursor:pointer; font-size:12px;">‚§¢
                                    Full Screen</button>
                            </div>
                        </div>
                        <div id="output"></div>
                    </div>
                </div>
            </section>

            <section id="gallery">
                <h2 style="margin-bottom: 20px; text-align: center;">Examples Gallery</h2>

                <h3 style="margin: 40px 0 20px; color: var(--secondary);">Compatible with PlantUML</h3>
                <div class="gallery-grid" id="gallery-compatible">
                    <!-- Compatible items injected via JS -->
                </div>

                <h3 style="margin: 40px 0 20px; color: var(--secondary);">SeedUML Extensions (Incompatible)</h3>
                <div class="gallery-grid" id="gallery-extensions">
                    <!-- Extension items injected via JS -->
                </div>
            </section>

            <section id="documentation">
                <h2 style="margin-bottom: 40px; text-align: center;">üìö Getting Started</h2>

                <div class="feature-card" style="margin-bottom: 40px;">
                    <h3 style="margin-bottom: 15px;">Getting Started</h3>
                    <p style="color: var(--text-muted); margin-bottom: 15px;">
                        Download the SeedUML library and include it in your project.
                    </p>
                    <pre
                        style="background: #f1f5f9; padding: 12px; border-radius: 6px; overflow-x: auto; font-size: 13px; border: 1px solid var(--border); margin-bottom: 15px;"><code style="color: var(--text-main);">&lt;script src="dist/index.min.js"&gt;&lt;/script&gt;</code></pre>
                    <p style="color: var(--text-muted); font-size: 14px;">
                        Once loaded, the <code
                            style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; border: 1px solid var(--border);">window.seeduml</code>
                        global object becomes available.
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
                    <div class="feature-card">
                        <h3 style="margin-bottom: 15px;">‚úÖ Manual Rendering</h3>
                        <p style="color: var(--text-muted); font-size: 12px; margin-bottom: 12px; line-height: 1.6;">
                            Use <code
                                style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; border: 1px solid var(--border);">renderSequenceDiagram()</code>
                            to manually convert diagram code to SVG. Perfect for dynamic content or custom rendering
                            logic.
                        </p>
                        <pre
                            style="background: #f1f5f9; padding: 12px; border-radius: 6px; overflow-x: auto; font-size: 11px; line-height: 1.5; border: 1px solid var(--border); margin-bottom: 12px;"><code style="color: var(--text-main);">const code = 'Alice -> Bob: Hello';
const svg = seeduml.renderSequenceDiagram(code);

// Insert into DOM
document.getElementById('output').innerHTML = svg;</code></pre>
                        <div style="font-size: 11px; line-height: 1.8;">
                            <p style="color: var(--text-main); font-weight: 600; margin-bottom: 4px;">Parameters:</p>
                            <p style="color: var(--text-muted); margin-bottom: 8px;">
                                ‚Ä¢ <code
                                    style="background: #f1f5f9; padding: 1px 4px; border-radius: 3px;">content</code>:
                                SeedUML-format diagram code
                            </p>
                            <p style="color: var(--text-main); font-weight: 600; margin-bottom: 4px;">Returns:</p>
                            <p style="color: var(--text-muted);">
                                SVG string. On error, returns styled error SVG (no exceptions thrown).
                            </p>
                        </div>
                    </div>
                    <div class="feature-card">
                        <h3 style="margin-bottom: 15px;">üîÑ Auto-Rendering</h3>
                        <p style="color: var(--text-muted); font-size: 12px; margin-bottom: 12px; line-height: 1.6;">
                            Call <code
                                style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; border: 1px solid var(--border);">initialize()</code>
                            to auto-detect and render all diagram blocks. Similar to Mermaid.
                        </p>
                        <pre
                            style="background: #f1f5f9; padding: 12px; border-radius: 6px; overflow-x: auto; font-size: 11px; line-height: 1.5; border: 1px solid var(--border); margin-bottom: 12px;"><code style="color: var(--text-main);">seeduml.initialize({
  startOnLoad: true,
  selector: 'pre.seeduml'
});

// Or use defaults:
seeduml.initialize();</code></pre>
                        <div style="font-size: 11px; line-height: 1.8;">
                            <p style="color: var(--text-main); font-weight: 600; margin-bottom: 4px;">Config Options:
                            </p>
                            <p style="color: var(--text-muted); margin-bottom: 6px;">
                                ‚Ä¢ <code
                                    style="background: #f1f5f9; padding: 1px 4px; border-radius: 3px;">startOnLoad</code>:
                                Auto-render on page load (default: true)
                            </p>
                            <p style="color: var(--text-muted); margin-bottom: 8px;">
                                ‚Ä¢ <code
                                    style="background: #f1f5f9; padding: 1px 4px; border-radius: 3px;">selector</code>:
                                CSS selector (default: 'pre.seeduml')
                            </p>
                            <p style="color: var(--text-main); font-weight: 600; margin-bottom: 4px;">Note:</p>
                            <p style="color: var(--text-muted);">
                                Finds all matching elements, extracts text content, and replaces with SVG diagrams.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="feature-card" style="margin-bottom: 40px;">
                    <h3 style="margin-bottom: 15px;">üìù HTML Usage Example</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="display: flex; flex-direction: column;">
                            <p
                                style="color: var(--text-muted); font-size: 12px; font-weight: 600; margin-bottom: 10px;">
                                Code:</p>
                            <pre
                                style="background: #f1f5f9; padding: 12px; border-radius: 6px; overflow-x: auto; font-size: 11px; line-height: 1.5; border: 1px solid var(--border); margin: 0; flex: 1; overflow-y: auto;"><code style="color: var(--text-main);">&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Diagrams&lt;/h1&gt;

    &lt;h2&gt;Example 1&lt;/h2&gt;
    &lt;pre class="seeduml"&gt;
Alice -> Bob: Hello!
Bob -> Alice: Hi!
    &lt;/pre&gt;

    &lt;h2&gt;Example 2&lt;/h2&gt;
    &lt;pre class="seeduml"&gt;
participant C
participant S

C -> S: Request
S -> C: Response
    &lt;/pre&gt;

    &lt;script src="./dist/seeduml.min.js"&gt;&lt;/script&gt;
    &lt;script&gt;
      seeduml.initialize();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
                        </div>
                        <div style="display: flex; flex-direction: column;">
                            <p
                                style="color: var(--text-muted); font-size: 12px; font-weight: 600; margin-bottom: 10px;">
                                Rendered Output:</p>
                            <div
                                style="background: #f8fafc; padding: 12px; border-radius: 6px; border: 1px solid var(--border); overflow-y: auto; flex: 1;">
                                <h4
                                    style="margin-top: 0; margin-bottom: 10px; font-size: 13px; color: var(--text-main);">
                                    Example 1</h4>
                                <pre class="seeduml"
                                    style="margin: 0 0 15px 0; padding: 0; background: transparent; border: none; font-size: 10px; color: #999;">Alice -> Bob: Hello!
Bob -> Alice: Hi!</pre>
                                <h4
                                    style="margin-top: 0; margin-bottom: 10px; font-size: 13px; color: var(--text-main);">
                                    Example 2</h4>
                                <pre class="seeduml"
                                    style="margin: 0; padding: 0; background: transparent; border: none; font-size: 10px; color: #999;">participant C
participant S

C -> S: Request
S -> C: Response</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>SeedUML &copy; 2026. Open source and free to use.</p>
        </div>
    </footer>

    <!-- Zoom Modal -->
    <div id="zoom-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Diagram Preview</div>
                <div style="display: flex; gap: 12px; margin-left: auto; margin-right: 16px;">
                    <button id="modal-copy-btn"
                        style="background:none; border:none; color:var(--primary); cursor:pointer; font-size:12px;">Copy
                        SVG</button>
                </div>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- SVG content will be injected here -->
            </div>
        </div>
    </div>

    <script>
        const samples = {
            basic: {
                title: "Basic Interactions",
                code: `Alice -> Bob: Authentication Request
Bob --> Alice: Authentication Response

Alice -> Bob: Another authentication Request
Alice <-- Bob: Another authentication Response`
            },
            participants: {
                title: "Participant Types",
                code: `participant Participant as Foo
actor       Actor       as Foo1
boundary    Boundary    as Foo2
control     Control     as Foo3
entity      Entity      as Foo4
database    Database    as Foo5
collections Collections as Foo6
queue       Queue       as Foo7

Foo -> Foo1 : To actor
Foo -> Foo2 : To boundary
Foo -> Foo3 : To control
Foo -> Foo4 : To entity
Foo -> Foo5 : To database
Foo -> Foo6 : To collections
Foo -> Foo7 : To queue`
            },
            participantOrder: {
                title: "Participant Order",
                code: `participant Last order 30
participant Middle order 20
participant First order 10`
            },
            aliases: {
                title: "Aliases & Colors",
                code: `actor Bob #red
participant Alice
participant "I have a really\\nlong name" as L #99FF99

Alice -> Bob: Authentication Request
Bob -> Alice: Authentication Response
Bob -> L: Log transaction`
            },
            selfMessage: {
                title: "Self-Messages",
                code: `Alice -> Alice: This is a signal to self.\\nIt also demonstrates\\nmultiline\\ntext`
            },
            arrowStyles: {
                title: "Arrow Styles",
                code: `Bob ->x Alice
Bob -> Alice
Bob ->> Alice
Bob -\\ Alice
Bob \\\- Alice
Bob //-- Alice

Bob ->o Alice
Bob o\\-- Alice

Bob <-> Alice
Bob <->o Alice`
            },
            coloredArrows: {
                title: "Colored Arrows",
                code: `Bob -[#red]> Alice : hello
Alice -[#0000FF]-> Bob : ok`
            },
            autonumber: {
                title: "Auto Numbering",
                code: `autonumber
Bob -> Alice : Authentication Request
Bob <- Alice : Authentication Response

autonumber 15
Bob -> Alice : Another authentication Request
Bob <- Alice : Another authentication Response

autonumber 40 10
Bob -> Alice : Yet another authentication Request
Bob <- Alice : Yet another authentication Response`
            },
            titleHeader: {
                title: "Title, Header & Footer",
                code: `header Page Header
footer Page %page% of %lastpage%

title Example Title

Alice -> Bob : message 1
Alice -> Bob : message 2`
            },
            groups: {
                title: "Groups & Alt/Else",
                code: `Alice -> Bob: Authentication Request

alt successful case
    Bob -> Alice: Authentication Accepted
else some kind of failure
    Bob -> Alice: Authentication Failure
    group My own label
        Alice -> Log : Log attack start
        loop 1000 times
            Alice -> Bob: DNS Attack
        end
        Alice -> Log : Log attack end
    end
else Another type of failure
    Bob -> Alice: Please repeat
end`
            },
            groupSecondLabel: {
                title: "Group Second Label",
                code: `Alice -> Bob: Authentication Request
Bob -> Alice: Authentication Failure

group My own label [My own label 2]
    Alice -> Log : Log attack start
    loop 1000 times
        Alice -> Bob: DNS Attack
    end
    Alice -> Log : Log attack end
end`
            },
            messageNotes: {
                title: "Notes on Messages",
                code: `Alice -> Bob : hello
note left: this is a first note

Bob -> Alice : ok
note right: this is another note

Bob -> Bob : I am thinking
note left
a note can also be defined
on several lines
end note`
            },
            otherNotes: {
                title: "Other Note Positions",
                code: `participant Alice
participant Bob

note left of Alice #aqua
This is displayed left of Alice.
end note

note right of Alice: This is displayed right of Alice.

note over Alice: This is displayed over Alice.

note over Alice, Bob #FFAAAA: This is displayed\\n over Bob and Alice.

note over Bob, Alice
This is yet another example
of a long note.
end note`
            },
            noteShapes: {
                title: "Note Shapes (hnote/rnote)",
                code: `caller -> server : conReq
hnote over caller : idle
caller <- server : conConf

rnote over server
"r" as rectangle
"h" as hexagon
endrnote

rnote over server
this is
on several
lines
endrnote

hnote over caller
this is
on several
lines
endhnote`
            },
            bubbleNote: {
                title: "Bubble Note",
                code: `Alice -> Bob : hello
bnote right : This is a bubble note

bnote over Alice, Bob
  This is an expanded description rule
end bnote`
            },
            noteAcross: {
                title: "Notes Across All",
                code: `Alice -> Bob : m1
Bob -> Charlie : m2

note over Alice, Charlie: Old method for note over all part.
note across: New method with note across

Bob -> Alice
hnote across: Note across all part.`
            },
            alignedNotes: {
                title: "Aligned Notes [/]",
                code: `note over Alice : initial state of Alice
/ note over Bob : initial state of Bob

Bob -> Alice : hello`
            },
            dividers: {
                title: "Dividers",
                code: `== Initialization ==

Alice -> Bob: Authentication Request
Bob --> Alice: Authentication Response

== Repetition ==

Alice -> Bob: Another authentication Request
Alice <-- Bob: Another authentication Response`
            },
            reference: {
                title: "Reference",
                code: `participant Alice
actor Bob

ref over Alice, Bob : init

Alice -> Bob : hello

ref over Bob
This can be on
several lines
end ref`
            },
            delay: {
                title: "Delays",
                code: `Alice -> Bob: Authentication Request
...
Bob --> Alice: Authentication Response
...5 minutes later...
Bob --> Alice: Good Bye!`
            },
            spacing: {
                title: "Spacing",
                code: `Alice -> Bob: message 1
Bob --> Alice: ok
|||

Alice -> Bob: message 2
Bob --> Alice: ok
||45||

Alice -> Bob: message 3
Bob --> Alice: ok`
            },
            activation: {
                title: "Activation & Lifeline",
                code: `participant User

User -> A: DoWork
activate A

A -> B: << createRequest >>
activate B

B -> C: DoWork
activate C
C --> B: WorkDone
destroy C

B --> A: RequestCreated
deactivate B

A -> User: Done
deactivate A`
            },
            nestedActivation: {
                title: "Nested Activation",
                code: `participant User

User -> A: DoWork
activate A #FFBBBB

A -> A: Internal call
activate A #DarkSalmon

A -> B: << createRequest >>
activate B

B --> A: RequestCreated
deactivate B
deactivate A

A -> User: Done
deactivate A`
            },
            returnKeyword: {
                title: "Return Keyword",
                code: `Bob -> Alice : hello
activate Alice
Alice -> Alice : some action
return bye`
            },
            createDestroy: {
                title: "Create & Destroy",
                code: `Bob -> Alice : hello

create Other
Alice -> Other : new

create control String
Alice -> String
note right : You can also put notes!

Alice --> Bob : ok`
            },
            activationShorthand: {
                title: "Activation Shortcuts",
                code: `alice -> bob ++ : hello
bob -> bob ++ : self call
bob -> bib ++ #005500 : hello
bob -> george ** : create
return done
return rc
bob -> george !! : delete
return success`
            },
            combinedShorthand: {
                title: "Combined Shortcuts",
                code: `alice   ->  bob     ++   : hello1
bob     ->  charlie --++ : hello2
charlie --> alice   --   : ok`
            },
            incomingOutgoing: {
                title: "Incoming/Outgoing",
                code: `[-> A: DoWork
activate A

A -> A: Internal call
activate A

A ->] : << createRequest >>

A <--] : RequestCreated
deactivate A

[<- A: Done
deactivate A`
            },
            stereotype: {
                title: "Stereotypes",
                code: `participant "Famous Bob" as Bob << Generated >>
participant Alice << (C,#ADD1B2) Testable >>

Bob -> Alice: First message`
            },
            timeConstraint: {
                title: "Time Constraints",
                code: `{start} Alice -> Bob : start doing things during duration
Bob -> Max : something
Max -> Bob : something else
{end} Bob -> Alice : finish

{start} <-> {end} : some time`
            },
            hideFootbox: {
                title: "Hide Footbox",
                code: `hide footbox
Alice -> Bob : hello
Bob -> Alice : ok`
            },
            complex: {
                title: "Complex Workflow",
                code: `actor Customer
participant "Mobile App" as App
participant "Order Service" as Order
database "Inventory" as Stock
participant "Payment Gateway" as Pay

Customer -> App: Place Order
activate App

App -> Order: Create Order
activate Order

Order -> Stock: Check Availability
activate Stock
Stock --> Order: Item Available
deactivate Stock

alt Payment Process
    Order -> Pay: Process Payment
    activate Pay
    Pay -> Pay: Validate Card
    Pay --> Order: Payment Success
    deactivate Pay
    
    Order --> App: Order Confirmed
else Payment Failed
    Order -> Pay: Process Payment
    activate Pay
    Pay --> Order: Payment Declined
    deactivate Pay
    
    Order --> App: Order Failed
end

deactivate Order

App --> Customer: Display Result
deactivate App`
            },
        };

        const editor = document.getElementById('editor');
        const output = document.getElementById('output');
        const galleryCompatible = document.getElementById('gallery-compatible');
        const galleryExtensions = document.getElementById('gallery-extensions');
        const copyBtn = document.getElementById('copy-btn');
        const zoomBtn = document.getElementById('zoom-btn');
        const modal = document.getElementById('zoom-modal');
        const modalBody = document.getElementById('modal-body');
        const closeModal = document.getElementById('close-modal');
        const modalCopyBtn = document.getElementById('modal-copy-btn');

        // Force preview to fit
        output.classList.add('zoom-fit');

        // Zoom Modal Logic
        zoomBtn.addEventListener('click', () => {
            // Clone SVG content to modal
            const svgContent = output.innerHTML;
            modalBody.innerHTML = svgContent;
            modal.classList.add('active');
        });

        function hideModal() {
            modal.classList.remove('active');
            // clear content after transition to avoid flicker? or just leave it.
            setTimeout(() => {
                if (!modal.classList.contains('active')) modalBody.innerHTML = '';
            }, 300);
        }

        closeModal.addEventListener('click', hideModal);

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                hideModal();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                hideModal();
            }
        });

        function render() {
            try {
                if (window.seeduml && window.seeduml.renderSequenceDiagram) {
                    const svg = window.seeduml.renderSequenceDiagram(editor.value);
                    output.innerHTML = svg;
                }
            } catch (e) {
                // Don't clear output on intermediate error, maybe show toast
                console.error(e);
            }
        }

        // Debounce render
        let timeout;
        editor.addEventListener('input', () => {
            clearTimeout(timeout);
            timeout = setTimeout(render, 300);
        });

        // Copy SVG Logic
        function setupCopyButton(button, sourceElement) {
            button.addEventListener('click', () => {
                const svgContent = sourceElement.innerHTML;
                navigator.clipboard.writeText(svgContent).then(() => {
                    const originalText = button.innerText;
                    button.innerText = 'Copied!';
                    setTimeout(() => button.innerText = originalText, 2000);
                });
            });
        }

        setupCopyButton(copyBtn, output);
        setupCopyButton(modalCopyBtn, modalBody);

        // Initialize Gallery
        function initGallery() {
            Object.entries(samples).forEach(([key, sample]) => {
                const item = document.createElement('div');
                item.className = 'gallery-item';

                // Render preview
                let previewSvg = '';
                try {
                    previewSvg = window.seeduml.renderSequenceDiagram(sample.code);
                } catch (e) { previewSvg = 'Error'; }

                item.innerHTML = `
                    <div class="gallery-preview">${previewSvg}</div>
                    <div class="gallery-info">
                        <div class="gallery-title">${sample.title}</div>
                    </div>
                `;

                item.addEventListener('click', () => {
                    editor.value = sample.code;
                    render();
                    document.getElementById('playground').scrollIntoView({ behavior: 'smooth' });
                });

                if (key === 'bubbleNote') {
                    galleryExtensions.appendChild(item);
                } else {
                    galleryCompatible.appendChild(item);
                }
            });
        }

        // Initial Load
        window.addEventListener('load', () => {
            render();
            if (window.seeduml) {
                initGallery();
                // Initialize auto-rendering for demonstration diagrams
                window.seeduml.initialize({ startOnLoad: true });
            } else {
                output.innerHTML = '<p style="color:red; opacity:0.6;">SeedUML library not loaded. Run npm run build.</p>';
            }
        });
    </script>
</body>

</html>